═══════════════════════════════════════════════════════════════════
  INSTRUCCIONES PARA ACTIVAR TIEMPO REAL - MUNDO INDUSTRIAL
═══════════════════════════════════════════════════════════════════

✅ CAMBIOS REALIZADOS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ✓ Instalado pusher-js en package.json
2. ✓ Configurado .env con variables de Reverb
3. ✓ Agregado logging detallado en bootstrap.js
4. ✓ Agregado logging detallado en dashboard-tables-corte.blade.php
5. ✓ Creada página de prueba: /test-echo

═══════════════════════════════════════════════════════════════════
  SERVICIOS CORRIENDO ACTUALMENTE
═══════════════════════════════════════════════════════════════════

✅ Vite (npm run dev)       → http://localhost:5174
✅ Reverb (WebSocket)       → ws://0.0.0.0:8080
✅ Queue Worker             → Procesando eventos

═══════════════════════════════════════════════════════════════════
  PASOS PARA PROBAR AHORA
═══════════════════════════════════════════════════════════════════

PASO 1: Abrir página de prueba
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Abre en tu navegador:
http://127.0.0.1:8000/test-echo

Esta página te mostrará:
- ✅ Si Echo está disponible
- ✅ Si WebSocket está conectado
- ✅ Si el canal 'corte' está suscrito
- 📋 Log de todos los eventos en tiempo real

DEBERÍAS VER:
✅ Echo está disponible
✅ WebSocket conectado a Reverb
✅ Suscrito al canal "corte"

SI VES ERRORES:
❌ Echo NO está disponible → Recarga la página (Ctrl+F5)
❌ Error de conexión → Verifica que Reverb esté corriendo
❌ Variables undefined → Verifica el .env

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

PASO 2: Probar con el dashboard real
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. Abre el dashboard donde están las tablas de corte
2. Abre la CONSOLA DEL NAVEGADOR (F12 → Console)
3. Deberías ver estos mensajes:

   🔧 Configuración de Echo/Reverb:
   VITE_REVERB_APP_KEY: mundo-industrial-key
   VITE_REVERB_HOST: 127.0.0.1
   VITE_REVERB_PORT: 8080
   VITE_REVERB_SCHEME: http
   
   📡 Configuración final de Echo: {...}
   ✅ WebSocket conectado exitosamente a Reverb
   
   === DASHBOARD CORTE - Inicializando Echo ===
   window.Echo disponible: true
   Suscribiéndose al canal "corte"...
   ✅ Suscrito exitosamente al canal "corte"
   Listeners configurados. Esperando eventos...

4. Si NO ves estos mensajes:
   - Recarga la página con Ctrl+F5 (recarga forzada)
   - Verifica que Vite esté corriendo (debe estar en puerto 5174)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

PASO 3: Probar tiempo real con dos ventanas
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. Abre DOS VENTANAS del dashboard (con las tablas de corte)
2. En ambas, abre la consola (F12)
3. En la VENTANA 1: Crea un nuevo registro de corte
4. En la VENTANA 2: Deberías ver INMEDIATAMENTE:

   En consola:
   🎉 Evento CorteRecordCreated recibido!
   Datos del evento: {...}
   Registro: {...}
   Datos preparados para actualizar: {...}
   
   En la tabla:
   - Los números se actualizan automáticamente
   - Las eficiencias cambian de color
   - Los totales se recalculan

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

═══════════════════════════════════════════════════════════════════
  SOLUCIÓN DE PROBLEMAS
═══════════════════════════════════════════════════════════════════

PROBLEMA: "Echo NO está disponible"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
SOLUCIÓN:
1. Verifica que Vite esté corriendo: npm run dev
2. Recarga la página con Ctrl+F5
3. Verifica que pusher-js esté instalado: npm list pusher-js

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

PROBLEMA: "Variables undefined en consola"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
SOLUCIÓN:
1. Verifica que el .env tenga las variables VITE_REVERB_*
2. REINICIA Vite (Ctrl+C y luego npm run dev)
3. Recarga la página

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

PROBLEMA: "Error de conexión WebSocket"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
SOLUCIÓN:
1. Verifica que Reverb esté corriendo: php artisan reverb:start
2. Verifica que el puerto 8080 no esté ocupado
3. Verifica las variables VITE_REVERB_HOST y VITE_REVERB_PORT

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

PROBLEMA: "Evento no llega a la otra ventana"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
SOLUCIÓN:
1. Verifica que Queue Worker esté corriendo: php artisan queue:work
2. Verifica en consola que ambas ventanas estén suscritas al canal
3. Verifica que BROADCAST_CONNECTION=reverb en .env

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

═══════════════════════════════════════════════════════════════════
  VERIFICAR CONFIGURACIÓN .ENV
═══════════════════════════════════════════════════════════════════

Tu .env DEBE tener estas líneas:

BROADCAST_CONNECTION=reverb
QUEUE_CONNECTION=database

REVERB_APP_ID=123456
REVERB_APP_KEY=mundo-industrial-key
REVERB_APP_SECRET=mundo-industrial-secret
REVERB_HOST=127.0.0.1
REVERB_PORT=8080
REVERB_SCHEME=http

VITE_REVERB_APP_KEY=mundo-industrial-key
VITE_REVERB_HOST=127.0.0.1
VITE_REVERB_PORT=8080
VITE_REVERB_SCHEME=http

═══════════════════════════════════════════════════════════════════
  COMANDOS PARA REINICIAR TODO
═══════════════════════════════════════════════════════════════════

Si algo no funciona, reinicia los 3 servicios:

Terminal 1:
npm run dev

Terminal 2:
php artisan reverb:start --debug

Terminal 3:
php artisan queue:work

═══════════════════════════════════════════════════════════════════

¡IMPORTANTE! Después de cualquier cambio en .env:
1. Reinicia Vite (Ctrl+C y npm run dev)
2. Recarga el navegador con Ctrl+F5

═══════════════════════════════════════════════════════════════════
