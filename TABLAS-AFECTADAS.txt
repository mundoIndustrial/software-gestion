â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    TABLAS AFECTADAS POR LA IMPORTACIÃ“N                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ”´ TABLAS QUE SE LIMPIAN CON --limpiar
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Cuando ejecutas el comando con la opciÃ³n --limpiar, SOLO se vacÃ­an estas tablas:

1. registro_piso_polo
   â””â”€ Contiene los registros de producciÃ³n de POLOS

2. registro_piso_produccion
   â””â”€ Contiene los registros de producciÃ³n general

3. operaciones_balanceo
   â””â”€ Contiene las operaciones de cada balanceo

4. balanceos
   â””â”€ Contiene los balanceos de prendas

5. prendas
   â””â”€ Contiene las prendas del sistema


âœ… TABLAS QUE NO SE TOCAN (PERMANECEN INTACTAS)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Las siguientes tablas NO son afectadas por la importaciÃ³n:

â€¢ users (usuarios del sistema)
â€¢ roles (roles de usuarios)
â€¢ permissions (permisos)
â€¢ password_resets (reseteo de contraseÃ±as)
â€¢ personal_access_tokens (tokens de acceso)
â€¢ failed_jobs (trabajos fallidos)
â€¢ migrations (historial de migraciones)
â€¢ registro_piso_corte (registros de corte)
â€¢ maquinas (catÃ¡logo de mÃ¡quinas)
â€¢ telas (catÃ¡logo de telas)
â€¢ horas (catÃ¡logo de horas)
â€¢ tiempo_ciclos (tiempos de ciclo)
â€¢ Y cualquier otra tabla no mencionada en la lista de arriba


ğŸ“Š RESUMEN VISUAL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BASE DE DATOS COMPLETA                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ”´ SE LIMPIAN (con --limpiar):                                        â”‚
â”‚     â”œâ”€ registro_piso_polo                                              â”‚
â”‚     â”œâ”€ registro_piso_produccion                                        â”‚
â”‚     â”œâ”€ operaciones_balanceo                                            â”‚
â”‚     â”œâ”€ balanceos                                                       â”‚
â”‚     â””â”€ prendas                                                         â”‚
â”‚                                                                         â”‚
â”‚  âœ… NO SE TOCAN:                                                        â”‚
â”‚     â”œâ”€ users                                                           â”‚
â”‚     â”œâ”€ roles                                                           â”‚
â”‚     â”œâ”€ permissions                                                     â”‚
â”‚     â”œâ”€ registro_piso_corte                                             â”‚
â”‚     â”œâ”€ maquinas                                                        â”‚
â”‚     â”œâ”€ telas                                                           â”‚
â”‚     â”œâ”€ horas                                                           â”‚
â”‚     â”œâ”€ tiempo_ciclos                                                   â”‚
â”‚     â””â”€ ... (todas las demÃ¡s tablas)                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


âš™ï¸ CÃ“MO FUNCIONA LA LIMPIEZA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. El script cuenta cuÃ¡ntos registros hay en cada tabla
2. Desactiva temporalmente las foreign keys
3. Ejecuta TRUNCATE en cada tabla (vacÃ­a completamente)
4. Reactiva las foreign keys
5. Muestra cuÃ¡ntos registros se eliminaron de cada tabla


ğŸ“‹ EJEMPLO DE SALIDA AL LIMPIAR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—‘ï¸  Limpiando solo las tablas especÃ­ficas...

   âœ“ registro_piso_polo (1,250 registros eliminados)
   âœ“ registro_piso_produccion (3,480 registros eliminados)
   âœ“ operaciones_balanceo (243 registros eliminados)
   âœ“ balanceos (5 registros eliminados)
   âœ“ prendas (5 registros eliminados)

âœ… Tablas limpiadas exitosamente
â„¹ï¸  Las demÃ¡s tablas permanecen intactas


ğŸ”’ SEGURIDAD
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… El script SIEMPRE pregunta antes de limpiar:

   âš ï¸  ADVERTENCIA: Se eliminarÃ¡n los registros de las siguientes tablas:
      â€¢ registro_piso_polo
      â€¢ registro_piso_produccion
      â€¢ operaciones_balanceo
      â€¢ balanceos
      â€¢ prendas

   â„¹ï¸  Las demÃ¡s tablas NO serÃ¡n afectadas (usuarios, roles, etc.)

   Â¿EstÃ¡s seguro de continuar? (yes/no) [no]:

âœ… Si respondes "no" o presionas Enter, la operaciÃ³n se cancela
âœ… Solo si respondes "yes" se procede con la limpieza


ğŸ’¡ RECOMENDACIONES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Usa --dry-run primero para verificar que los archivos se lean bien:
   php artisan importar:todo-excel --dry-run

2. Si todo estÃ¡ bien, ejecuta sin --limpiar para agregar datos:
   php artisan importar:todo-excel

3. Si quieres empezar desde cero, usa --limpiar:
   php artisan importar:todo-excel --limpiar

4. Haz respaldo de la base de datos antes de usar --limpiar
   (aunque solo afecta 5 tablas especÃ­ficas)


â“ PREGUNTAS FRECUENTES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

P: Â¿Se borrarÃ¡n mis usuarios?
R: NO. La tabla 'users' NO se toca.

P: Â¿Se borrarÃ¡n los registros de corte?
R: NO. La tabla 'registro_piso_corte' NO se toca.

P: Â¿Se borrarÃ¡n las mÃ¡quinas y telas?
R: NO. Las tablas 'maquinas' y 'telas' NO se tocan.

P: Â¿Puedo recuperar los datos despuÃ©s de limpiar?
R: NO. TRUNCATE elimina permanentemente. Haz respaldo antes.

P: Â¿QuÃ© pasa si no uso --limpiar?
R: Los nuevos datos se AGREGAN a los existentes (no se elimina nada).

P: Â¿Puedo limpiar solo una tabla?
R: NO con este script. Limpia las 5 tablas relacionadas o ninguna.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        Â¡IMPORTANTE RECORDAR!

    La opciÃ³n --limpiar es SELECTIVA y SEGURA
    Solo afecta las 5 tablas de datos de producciÃ³n y balanceos
    El resto de tu base de datos permanece completamente intacta

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
