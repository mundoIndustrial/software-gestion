// Script para ejecutar en: php artisan tinker
// Copiar y pegar estas lรญneas en la consola de Tinker

echo "\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n";
echo "โ  TEST: Descripciรณn de Prendas                                 โ\n";
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n\n";

// 1. Buscar un pedido con prendas
echo "๐ PASO 1: Buscando pedidos con prendas...\n";
$pedido = App\Models\PedidoProduccion::with('prendas')->has('prendas')->first();

if (!$pedido) {
    echo "โ No hay pedidos con prendas\n";
    exit;
}

echo "โ Pedido encontrado: #{$pedido->numero_pedido}\n";
echo "   Cliente: {$pedido->cliente}\n";
echo "   Prendas: {$pedido->prendas->count()}\n\n";

// 2. Verificar campos de la primera prenda
echo "๐ PASO 2: Verificando campos de la primera prenda...\n";
$prenda = $pedido->prendas->first();

echo "   โ ID: {$prenda->id}\n";
echo "   โ Nombre: {$prenda->nombre_prenda}\n";
echo "   โ Cantidad: {$prenda->cantidad}\n";
echo "   โ Descripciรณn: " . substr($prenda->descripcion, 0, 50) . "...\n";
echo "   โ Color ID: {$prenda->color_id}\n";
echo "   โ Tela ID: {$prenda->tela_id}\n";
echo "   โ Tipo Manga ID: {$prenda->tipo_manga_id}\n";
echo "   โ Bolsillos: " . ($prenda->tiene_bolsillos ? 'Sร' : 'NO') . "\n";
echo "   โ Reflectivo: " . ($prenda->tiene_reflectivo ? 'Sร' : 'NO') . "\n";
echo "   โ Cantidad Talla: " . json_encode($prenda->cantidad_talla) . "\n\n";

// 3. Generar descripciรณn detallada
echo "๐ PASO 3: Generando descripciรณn detallada de la prenda...\n";
$descripcionDetallada = $prenda->generarDescripcionDetallada();

echo "โ Descripciรณn generada:\n";
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n";
echo $descripcionDetallada;
echo "\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n\n";

// 4. Generar descripciรณn del pedido
echo "๐ PASO 4: Generando descripciรณn_prendas del pedido...\n";
$descripcionPedido = $pedido->descripcion_prendas;

echo "โ Descripciรณn del pedido:\n";
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n";
echo $descripcionPedido;
echo "\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n\n";

// 5. Verificar relaciรณn numero_pedido
echo "๐ PASO 5: Verificando relaciรณn numero_pedido...\n";
echo "   Prenda numero_pedido: {$prenda->numero_pedido}\n";
echo "   Pedido numero_pedido: {$pedido->numero_pedido}\n";

if ($prenda->numero_pedido === $pedido->numero_pedido) {
    echo "   โ Relaciรณn correcta\n\n";
} else {
    echo "   โ Relaciรณn incorrecta\n\n";
}

// 6. Resumen
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n";
echo "โ  โ PRUEBAS COMPLETADAS EXITOSAMENTE                          โ\n";
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n\n";
